<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    JVM 정리 - Hyeoni&#39;s Blog
    
  </title>

  <meta name="description" content="JVM 정리">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://hyeoni90.github.io/java/2020/11/12/jvm.html">
  <link rel="alternate" type="application/rss+xml" title="Hyeoni&#39;s Blog" href="/feed.xml">

</head>


<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Hyeoni&#39;s Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


<!-- Page Header -->

    <header class="masthead">
        
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-10 mx-auto">
                    <div class="post-heading">
                        <h1>JVM 정리</h1>
                        
                        <span class="meta">Posted by
              <a href="#">hyeoni90</a>
              on November 12, 2020 &middot; <span class="reading-time" title="Estimated read time">
  
   2 mins  read </span>

            </span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">

                <h1 id="jvm-정리">JVM 정리</h1>

<h2 id="jvm-heap-메모리-구조">JVM Heap 메모리 구조</h2>

<ul>
  <li>Young, Old 영역으로 나뉜다.
    <ul>
      <li>Young 영역은 Eden, Survivor 영역으로 구성,
        <ul>
          <li>Eden: Object 가 Heap 에 최초로 할당 되는 장소
            <ul>
              <li>Eden 영역이 꽉 차게 되면 Object 참조 여부를 따져 만약 참조가 되어 있는 Live Object 면 Survivor 영역으로 넘기고, 참조가 끊어진 Garbage Object이면 그냥 남겨 놓는다. 모든 Live Object 가 Survivor 영여긍로 넘어가면 Eden영역을 모두 청소한다.</li>
            </ul>
          </li>
          <li>Survivor: Eden 영역에서 살아남은 Object 들이 잠시 머무르는 곳
            <ul>
              <li>Minor GC: Survivor 영역은 2개로 구성되는데 Live Object를 대피 시킬 때는 하나의 Survivor 영역만 사용하게 됨. 전반 적인 과정을 뜻함!!</li>
            </ul>
          </li>
          <li>Young 영역에서 오래 남아 성숙된 Object(특정 회수 이상 참조되어 기준 age를 초과한 object 말함) 는 Old 영역으로 이동</li>
        </ul>
      </li>
      <li>
        <p>Old 영역은 비교적 오랫동안 참조가 되어 이용 되고 있고 앞으로도 계속 사용될 확률이 높은 Object들을 저장하는 곳</p>
      </li>
      <li>Full GC(Major GC): Promotion 과정 중 Old 영역 메모리도 충분하지 않으면 해당 영역에도 GC발생!</li>
    </ul>
  </li>
</ul>

<h3 id="gc-관련-장애-발생-유형의-원인-및-해결-방안">GC 관련 장애 발생 유형의 원인 및 해결 방안</h3>

<p><code class="language-plaintext highlighter-rouge">OOME(Out Of Memory Error)</code> : JVM이 Heap Memory를 더이상 Object를 할당할 수 없을 때 발생하는 오류!
2가지 유형으로 크게 구분할 수 있다.</p>

<ul>
  <li>OOME: java heap space
    <ul>
      <li>
        <p>Heap memory공간이 부족하여 발생. ⇒ 공간 부족의 원인으로는 Heap memory의 크기가 작아서 발생하는 경우와 애플리케이션 문제로 발생하는 경우가 있음.</p>
      </li>
      <li>
        <p>해결방안)</p>
        <ul>
          <li>-Xmx 옵션을 사용해서 Heap memory 크기를 증가 시키는 방법 → 이는 GC time의 증가르 동반하기 때문에 충분한 사전 테스트 필요</li>
          <li>애플리케이션 프로파일링 → Heap Dump 분석을 기반으로 쓸데 없이 많은 Memory 를 사용하거나 Memory leak 유발하는 로직을 찾아내어 수정한다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>OOME: PerGem space
    <ul>
      <li>Java Heap memory 영역 중 Permanent영역은 String pool, Class Method 과 연관된 각종 Meta Data 등을 저장하는 용도로 사용.</li>
      <li>JVM 기동 시 로딩되는 Class or String 수가 많다면 해당 오류의 원인 된다.</li>
      <li>
        <p>또한 Classloader leak에 의해 발생될 수 있음</p>
      </li>
      <li>해결 방안)
        <ul>
          <li>JVM 튜닝!!</li>
          <li>일반 비즈니스 프로그램으로 핸들링할 수 없기 때문에 JVM 튜닝으로도 해결이 되지 않는다면, WAS or JDK 버그를 의심해 봐야한다!</li>
          <li>VisualVM JDK6 부터 제공되는 툴로 실행 중인JVM에 대해 자세한 정보를 GUI로 제공해줌. Thread 모니터링, JVM memory 모니터링, Thread dump 및 head dump 생성 등</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="references">References</h2>
<ul>
  <li><a href="http://www.yes24.com/Product/Goods/51095692">JVM Performance Optimizing 및 성능분석 사례 Java Virtual Machine</a></li>
  <li><a href="https://blog.voidmainvoid.net/190">자바 가비지 컬렉션 설명 및 종류</a></li>
</ul>


                <hr>

                <div class="clearfix">

                    
                    <a class="btn btn-primary float-left" href="/rabbitmq/2019/11/05/how-to-install-rabbitmq-on-mac.html" data-toggle="tooltip" data-placement="top" title="Mac OS에 RabbitMQ 설치하기">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
                    
                    
                    <a class="btn btn-primary float-right" href="/etc/2021/04/30/how-to-decorate-terminal.html" data-toggle="tooltip" data-placement="top" title="[개발 환경 세팅] Mac Terminal 꾸미기">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
                    

                </div>

            </div>
        </div>
    </div>

<!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:gusk743@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/hyeoni90">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; hyeoni90 2021</p>
      </div>
    </div>
  </div>
</footer>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>




</body>

</html>